{"main":{"proto":{"additionalProperties":false,"type":"object","required":["content"],"properties":{"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"content":{"minLength":1,"type":"string","maxLength":1048576},"create_time":{"type":"integer"},"update_time":{"type":"integer"},"desc":{"maxLength":256,"type":"string"}}},"plugin_config":{"additionalProperties":false,"type":"object","required":["id","plugins"],"properties":{"name":{"type":"string"},"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"plugins":{"type":"object"},"labels":{"patternProperties":{".*":{"minLength":1,"maxLength":256,"description":"value of label","type":"string","pattern":"^\\S+$"}},"type":"object","description":"key/value pairs to specify attributes"},"create_time":{"type":"integer"},"update_time":{"type":"integer"},"desc":{"maxLength":256,"type":"string"}}},"consumer_group":{"additionalProperties":false,"type":"object","required":["id","plugins"],"properties":{"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"labels":{"patternProperties":{".*":{"minLength":1,"maxLength":256,"description":"value of label","type":"string","pattern":"^\\S+$"}},"type":"object","description":"key/value pairs to specify attributes"},"plugins":{"type":"object"},"create_time":{"type":"integer"},"update_time":{"type":"integer"},"desc":{"maxLength":256,"type":"string"}}},"route":{"anyOf":[{"required":["plugins","uri"]},{"required":["upstream","uri"]},{"required":["upstream_id","uri"]},{"required":["service_id","uri"]},{"required":["plugins","uris"]},{"required":["upstream","uris"]},{"required":["upstream_id","uris"]},{"required":["service_id","uris"]},{"required":["script","uri"]},{"required":["script","uris"]}],"properties":{"plugin_config_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"desc":{"maxLength":256,"type":"string"},"script":{"minLength":10,"type":"string","maxLength":102400},"remote_addr":{"type":"string","anyOf":[{"title":"IPv4","type":"string","format":"ipv4"},{"title":"IPv4/CIDR","type":"string","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"title":"IPv6","type":"string","format":"ipv6"},{"title":"IPv6/CIDR","type":"string","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}],"description":"client IP"},"status":{"enum":[1,0],"type":"integer","default":1,"description":"route status, 1 to enable, 0 to disable"},"enable_websocket":{"type":"boolean","description":"enable websocket for request"},"uri":{"minLength":1,"type":"string","maxLength":4096},"create_time":{"type":"integer"},"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"name":{"minLength":1,"maxLength":100,"type":"string"},"upstream_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"service_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"methods":{"items":{"enum":["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE","PURGE"],"type":"string","description":"HTTP method"},"type":"array","uniqueItems":true},"hosts":{"items":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"type":"array","minItems":1,"uniqueItems":true},"remote_addrs":{"items":{"type":"string","anyOf":[{"title":"IPv4","type":"string","format":"ipv4"},{"title":"IPv4/CIDR","type":"string","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"title":"IPv6","type":"string","format":"ipv6"},{"title":"IPv6/CIDR","type":"string","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}],"description":"client IP"},"type":"array","minItems":1,"uniqueItems":true},"filter_func":{"minLength":10,"type":"string","pattern":"^function"},"vars":{"type":"array"},"script_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"labels":{"patternProperties":{".*":{"minLength":1,"maxLength":256,"description":"value of label","type":"string","pattern":"^\\S+$"}},"type":"object","description":"key/value pairs to specify attributes"},"timeout":{"type":"object","required":["connect","send","read"],"properties":{"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"},"connect":{"exclusiveMinimum":0,"type":"number"}}},"priority":{"default":0,"type":"integer"},"uris":{"items":{"type":"string","description":"HTTP uri"},"type":"array","minItems":1,"uniqueItems":true},"upstream":{"additionalProperties":false,"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"type":"object","properties":{"discovery_args":{"properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}},"type":"object"},"keepalive_pool":{"properties":{"size":{"default":320,"minimum":1,"type":"integer"},"idle_timeout":{"default":60,"minimum":0,"type":"number"},"requests":{"default":1000,"minimum":1,"type":"integer"}},"type":"object"},"nodes":{"anyOf":[{"patternProperties":{".*":{"type":"integer","minimum":0,"description":"weight of node"}},"type":"object"},{"items":{"type":"object","required":["host","weight"],"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"priority":{"type":"integer","default":0,"description":"priority of node"},"metadata":{"type":"object","description":"metadata of node"},"port":{"type":"integer","minimum":1,"description":"port of node"},"weight":{"type":"integer","minimum":0,"description":"weight of node"}}},"type":"array"}]},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"scheme":{"enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"default":"http","description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka."},"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"service_name":{"minLength":1,"maxLength":256,"type":"string"},"name":{"minLength":1,"maxLength":100,"type":"string"},"type":{"type":"string","default":"roundrobin","description":"algorithms of load balancing"},"hash_on":{"enum":["vars","header","cookie","consumer","vars_combinations"],"default":"vars","type":"string"},"tls":{"type":"object","dependencies":{"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_cert":{"required":["client_key"]},"client_key":{"required":["client_cert"]}},"properties":{"client_cert_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"verify":{"type":"boolean","default":false,"description":"Turn on server certificate verification, currently only kafka upstream is supported"},"client_cert":{"minLength":128,"type":"string","maxLength":65536},"client_key":{"minLength":128,"type":"string","maxLength":65536}}},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"checks":{"additionalProperties":false,"type":"object","anyOf":[{"required":["active"]},{"required":["active","passive"]}],"properties":{"passive":{"properties":{"type":{"enum":["http","https","tcp"],"type":"string","default":"http"},"healthy":{"properties":{"successes":{"maximum":254,"minimum":0,"default":5,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]}},"type":"object"},"unhealthy":{"properties":{"tcp_failures":{"maximum":254,"minimum":0,"default":2,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[429,500,503]},"timeouts":{"maximum":254,"minimum":0,"default":7,"type":"integer"},"http_failures":{"maximum":254,"minimum":0,"default":5,"type":"integer"}},"type":"object"}},"type":"object"},"active":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"unhealthy":{"properties":{"tcp_failures":{"maximum":254,"minimum":1,"default":2,"type":"integer"},"timeouts":{"maximum":254,"minimum":1,"default":3,"type":"integer"},"interval":{"minimum":1,"default":1,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[429,404,500,501,502,503,504,505]},"http_failures":{"maximum":254,"minimum":1,"default":5,"type":"integer"}},"type":"object"},"type":{"enum":["http","https","tcp"],"type":"string","default":"http"},"req_headers":{"items":{"uniqueItems":true,"type":"string"},"type":"array","minItems":1},"timeout":{"default":1,"type":"number"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"healthy":{"properties":{"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[200,302]},"interval":{"minimum":1,"default":1,"type":"integer"},"successes":{"maximum":254,"minimum":1,"default":2,"type":"integer"}},"type":"object"},"port":{"maximum":65535,"minimum":1,"type":"integer"}},"type":"object"}}},"timeout":{"type":"object","required":["connect","send","read"],"properties":{"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"},"connect":{"exclusiveMinimum":0,"type":"number"}}},"labels":{"patternProperties":{".*":{"minLength":1,"maxLength":256,"description":"value of label","type":"string","pattern":"^\\S+$"}},"type":"object","description":"key/value pairs to specify attributes"},"pass_host":{"enum":["pass","node","rewrite"],"type":"string","default":"pass","description":"mod of host passing"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"update_time":{"type":"integer"},"discovery_type":{"type":"string","description":"discovery type"}}},"update_time":{"type":"integer"},"plugins":{"type":"object"}},"not":{"anyOf":[{"required":["script","plugins"]},{"required":["script","plugin_config_id"]}]},"type":"object","additionalProperties":false,"allOf":[{"oneOf":[{"required":["uri"]},{"required":["uris"]}]},{"oneOf":[{"not":{"anyOf":[{"required":["host"]},{"required":["hosts"]}]}},{"required":["host"]},{"required":["hosts"]}]},{"oneOf":[{"not":{"anyOf":[{"required":["remote_addr"]},{"required":["remote_addrs"]}]}},{"required":["remote_addr"]},{"required":["remote_addrs"]}]}]},"global_rule":{"additionalProperties":false,"type":"object","properties":{"update_time":{"type":"integer"},"create_time":{"type":"integer"},"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"plugins":{"type":"object"}},"required":["id","plugins"]},"upstream_hash_vars_schema":{"pattern":"^((uri|server_name|server_addr|request_uri|remote_port|remote_addr|query_string|host|hostname|mqtt_client_id)|arg_[0-9a-zA-z_-]+)$","type":"string"},"plugins":{"items":{"type":"object","required":["name"],"properties":{"stream":{"type":"boolean"},"additionalProperties":false,"name":{"minLength":1,"type":"string"}}},"type":"array"},"upstream":{"additionalProperties":false,"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"type":"object","properties":{"discovery_args":{"properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}},"type":"object"},"keepalive_pool":{"properties":{"size":{"default":320,"minimum":1,"type":"integer"},"idle_timeout":{"default":60,"minimum":0,"type":"number"},"requests":{"default":1000,"minimum":1,"type":"integer"}},"type":"object"},"nodes":{"anyOf":[{"patternProperties":{".*":{"type":"integer","minimum":0,"description":"weight of node"}},"type":"object"},{"items":{"type":"object","required":["host","weight"],"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"priority":{"type":"integer","default":0,"description":"priority of node"},"metadata":{"type":"object","description":"metadata of node"},"port":{"type":"integer","minimum":1,"description":"port of node"},"weight":{"type":"integer","minimum":0,"description":"weight of node"}}},"type":"array"}]},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"scheme":{"enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"default":"http","description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka."},"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"service_name":{"minLength":1,"maxLength":256,"type":"string"},"name":{"minLength":1,"maxLength":100,"type":"string"},"type":{"type":"string","default":"roundrobin","description":"algorithms of load balancing"},"hash_on":{"enum":["vars","header","cookie","consumer","vars_combinations"],"default":"vars","type":"string"},"tls":{"type":"object","dependencies":{"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_cert":{"required":["client_key"]},"client_key":{"required":["client_cert"]}},"properties":{"client_cert_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"verify":{"type":"boolean","default":false,"description":"Turn on server certificate verification, currently only kafka upstream is supported"},"client_cert":{"minLength":128,"type":"string","maxLength":65536},"client_key":{"minLength":128,"type":"string","maxLength":65536}}},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"checks":{"additionalProperties":false,"type":"object","anyOf":[{"required":["active"]},{"required":["active","passive"]}],"properties":{"passive":{"properties":{"type":{"enum":["http","https","tcp"],"type":"string","default":"http"},"healthy":{"properties":{"successes":{"maximum":254,"minimum":0,"default":5,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]}},"type":"object"},"unhealthy":{"properties":{"tcp_failures":{"maximum":254,"minimum":0,"default":2,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[429,500,503]},"timeouts":{"maximum":254,"minimum":0,"default":7,"type":"integer"},"http_failures":{"maximum":254,"minimum":0,"default":5,"type":"integer"}},"type":"object"}},"type":"object"},"active":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"unhealthy":{"properties":{"tcp_failures":{"maximum":254,"minimum":1,"default":2,"type":"integer"},"timeouts":{"maximum":254,"minimum":1,"default":3,"type":"integer"},"interval":{"minimum":1,"default":1,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[429,404,500,501,502,503,504,505]},"http_failures":{"maximum":254,"minimum":1,"default":5,"type":"integer"}},"type":"object"},"type":{"enum":["http","https","tcp"],"type":"string","default":"http"},"req_headers":{"items":{"uniqueItems":true,"type":"string"},"type":"array","minItems":1},"timeout":{"default":1,"type":"number"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"healthy":{"properties":{"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[200,302]},"interval":{"minimum":1,"default":1,"type":"integer"},"successes":{"maximum":254,"minimum":1,"default":2,"type":"integer"}},"type":"object"},"port":{"maximum":65535,"minimum":1,"type":"integer"}},"type":"object"}}},"timeout":{"type":"object","required":["connect","send","read"],"properties":{"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"},"connect":{"exclusiveMinimum":0,"type":"number"}}},"labels":{"patternProperties":{".*":{"minLength":1,"maxLength":256,"description":"value of label","type":"string","pattern":"^\\S+$"}},"type":"object","description":"key/value pairs to specify attributes"},"pass_host":{"enum":["pass","node","rewrite"],"type":"string","default":"pass","description":"mod of host passing"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"update_time":{"type":"integer"},"discovery_type":{"type":"string","description":"discovery type"}}},"service":{"additionalProperties":false,"type":"object","properties":{"plugins":{"type":"object"},"hosts":{"items":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"type":"array","minItems":1,"uniqueItems":true},"enable_websocket":{"type":"boolean","description":"enable websocket for request"},"desc":{"maxLength":256,"type":"string"},"script":{"minLength":10,"type":"string","maxLength":102400},"upstream":{"additionalProperties":false,"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"type":"object","properties":{"discovery_args":{"properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}},"type":"object"},"keepalive_pool":{"properties":{"size":{"default":320,"minimum":1,"type":"integer"},"idle_timeout":{"default":60,"minimum":0,"type":"number"},"requests":{"default":1000,"minimum":1,"type":"integer"}},"type":"object"},"nodes":{"anyOf":[{"patternProperties":{".*":{"type":"integer","minimum":0,"description":"weight of node"}},"type":"object"},{"items":{"type":"object","required":["host","weight"],"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"priority":{"type":"integer","default":0,"description":"priority of node"},"metadata":{"type":"object","description":"metadata of node"},"port":{"type":"integer","minimum":1,"description":"port of node"},"weight":{"type":"integer","minimum":0,"description":"weight of node"}}},"type":"array"}]},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"scheme":{"enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"default":"http","description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka."},"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"service_name":{"minLength":1,"maxLength":256,"type":"string"},"name":{"minLength":1,"maxLength":100,"type":"string"},"type":{"type":"string","default":"roundrobin","description":"algorithms of load balancing"},"hash_on":{"enum":["vars","header","cookie","consumer","vars_combinations"],"default":"vars","type":"string"},"tls":{"type":"object","dependencies":{"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_cert":{"required":["client_key"]},"client_key":{"required":["client_cert"]}},"properties":{"client_cert_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"verify":{"type":"boolean","default":false,"description":"Turn on server certificate verification, currently only kafka upstream is supported"},"client_cert":{"minLength":128,"type":"string","maxLength":65536},"client_key":{"minLength":128,"type":"string","maxLength":65536}}},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"checks":{"additionalProperties":false,"type":"object","anyOf":[{"required":["active"]},{"required":["active","passive"]}],"properties":{"passive":{"properties":{"type":{"enum":["http","https","tcp"],"type":"string","default":"http"},"healthy":{"properties":{"successes":{"maximum":254,"minimum":0,"default":5,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]}},"type":"object"},"unhealthy":{"properties":{"tcp_failures":{"maximum":254,"minimum":0,"default":2,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[429,500,503]},"timeouts":{"maximum":254,"minimum":0,"default":7,"type":"integer"},"http_failures":{"maximum":254,"minimum":0,"default":5,"type":"integer"}},"type":"object"}},"type":"object"},"active":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"unhealthy":{"properties":{"tcp_failures":{"maximum":254,"minimum":1,"default":2,"type":"integer"},"timeouts":{"maximum":254,"minimum":1,"default":3,"type":"integer"},"interval":{"minimum":1,"default":1,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[429,404,500,501,502,503,504,505]},"http_failures":{"maximum":254,"minimum":1,"default":5,"type":"integer"}},"type":"object"},"type":{"enum":["http","https","tcp"],"type":"string","default":"http"},"req_headers":{"items":{"uniqueItems":true,"type":"string"},"type":"array","minItems":1},"timeout":{"default":1,"type":"number"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"healthy":{"properties":{"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[200,302]},"interval":{"minimum":1,"default":1,"type":"integer"},"successes":{"maximum":254,"minimum":1,"default":2,"type":"integer"}},"type":"object"},"port":{"maximum":65535,"minimum":1,"type":"integer"}},"type":"object"}}},"timeout":{"type":"object","required":["connect","send","read"],"properties":{"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"},"connect":{"exclusiveMinimum":0,"type":"number"}}},"labels":{"patternProperties":{".*":{"minLength":1,"maxLength":256,"description":"value of label","type":"string","pattern":"^\\S+$"}},"type":"object","description":"key/value pairs to specify attributes"},"pass_host":{"enum":["pass","node","rewrite"],"type":"string","default":"pass","description":"mod of host passing"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"update_time":{"type":"integer"},"discovery_type":{"type":"string","description":"discovery type"}}},"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"labels":{"patternProperties":{".*":{"minLength":1,"maxLength":256,"description":"value of label","type":"string","pattern":"^\\S+$"}},"type":"object","description":"key/value pairs to specify attributes"},"create_time":{"type":"integer"},"upstream_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"update_time":{"type":"integer"},"name":{"minLength":1,"maxLength":100,"type":"string"}}},"upstream_hash_header_schema":{"pattern":"^[a-zA-Z0-9-_]+$","type":"string"},"ssl":{"if":{"properties":{"type":{"enum":["server"]}}},"else":{"required":["key","cert"]},"properties":{"snis":{"items":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"type":"array","minItems":1},"certs":{"items":{"minLength":128,"type":"string","maxLength":65536},"type":"array"},"client":{"type":"object","required":["ca"],"properties":{"depth":{"minimum":0,"default":1,"type":"integer"},"skip_mtls_uri_regex":{"items":{"type":"string","description":"uri regular expression to skip mtls"},"type":"array","minItems":1,"uniqueItems":true},"ca":{"minLength":128,"type":"string","maxLength":65536}}},"type":{"enum":["server","client"],"type":"string","default":"server","description":"ssl certificate type, server to server certificate, client to client certificate for upstream"},"key":{"oneOf":[{"minLength":128,"type":"string","maxLength":65536},{"pattern":"^\\$(secret|env)://","type":"string"}]},"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"create_time":{"type":"integer"},"ssl_protocols":{"items":{"enum":["TLSv1.1","TLSv1.2","TLSv1.3"]},"description":"set ssl protocols","type":"array","uniqueItems":true,"maxItems":3},"keys":{"items":{"minLength":128,"type":"string","maxLength":65536},"type":"array"},"labels":{"patternProperties":{".*":{"minLength":1,"maxLength":256,"description":"value of label","type":"string","pattern":"^\\S+$"}},"type":"object","description":"key/value pairs to specify attributes"},"status":{"enum":[1,0],"type":"integer","default":1,"description":"ssl status, 1 to enable, 0 to disable"},"sni":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"update_time":{"type":"integer"},"cert":{"oneOf":[{"minLength":128,"type":"string","maxLength":65536},{"pattern":"^\\$(secret|env)://","type":"string"}]}},"type":"object","additionalProperties":false,"then":{"oneOf":[{"required":["sni","key","cert"]},{"required":["snis","key","cert"]}]}},"stream_route":{"type":"object","additionalProperties":false,"properties":{"protocol":{"type":"object","required":["name"],"properties":{"logger":{"items":{"additionalProperties":false,"dependencies":{"name":["conf"]},"properties":{"filter":{"type":"array","description":"logger filter rules"},"conf":{"type":"object","description":"logger plugin configuration"},"name":{"type":"string"}}},"type":"array"},"superior_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"conf":{"type":"object","description":"protocol-specific configuration"},"name":{"type":"string"}}},"plugins":{"type":"object"},"sni":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","description":"server name indication"},"upstream_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"upstream":{"additionalProperties":false,"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"type":"object","properties":{"discovery_args":{"properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}},"type":"object"},"keepalive_pool":{"properties":{"size":{"default":320,"minimum":1,"type":"integer"},"idle_timeout":{"default":60,"minimum":0,"type":"number"},"requests":{"default":1000,"minimum":1,"type":"integer"}},"type":"object"},"nodes":{"anyOf":[{"patternProperties":{".*":{"type":"integer","minimum":0,"description":"weight of node"}},"type":"object"},{"items":{"type":"object","required":["host","weight"],"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"priority":{"type":"integer","default":0,"description":"priority of node"},"metadata":{"type":"object","description":"metadata of node"},"port":{"type":"integer","minimum":1,"description":"port of node"},"weight":{"type":"integer","minimum":0,"description":"weight of node"}}},"type":"array"}]},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"scheme":{"enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"default":"http","description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka."},"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"service_name":{"minLength":1,"maxLength":256,"type":"string"},"name":{"minLength":1,"maxLength":100,"type":"string"},"type":{"type":"string","default":"roundrobin","description":"algorithms of load balancing"},"hash_on":{"enum":["vars","header","cookie","consumer","vars_combinations"],"default":"vars","type":"string"},"tls":{"type":"object","dependencies":{"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_cert":{"required":["client_key"]},"client_key":{"required":["client_cert"]}},"properties":{"client_cert_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"verify":{"type":"boolean","default":false,"description":"Turn on server certificate verification, currently only kafka upstream is supported"},"client_cert":{"minLength":128,"type":"string","maxLength":65536},"client_key":{"minLength":128,"type":"string","maxLength":65536}}},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"checks":{"additionalProperties":false,"type":"object","anyOf":[{"required":["active"]},{"required":["active","passive"]}],"properties":{"passive":{"properties":{"type":{"enum":["http","https","tcp"],"type":"string","default":"http"},"healthy":{"properties":{"successes":{"maximum":254,"minimum":0,"default":5,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]}},"type":"object"},"unhealthy":{"properties":{"tcp_failures":{"maximum":254,"minimum":0,"default":2,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[429,500,503]},"timeouts":{"maximum":254,"minimum":0,"default":7,"type":"integer"},"http_failures":{"maximum":254,"minimum":0,"default":5,"type":"integer"}},"type":"object"}},"type":"object"},"active":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"unhealthy":{"properties":{"tcp_failures":{"maximum":254,"minimum":1,"default":2,"type":"integer"},"timeouts":{"maximum":254,"minimum":1,"default":3,"type":"integer"},"interval":{"minimum":1,"default":1,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[429,404,500,501,502,503,504,505]},"http_failures":{"maximum":254,"minimum":1,"default":5,"type":"integer"}},"type":"object"},"type":{"enum":["http","https","tcp"],"type":"string","default":"http"},"req_headers":{"items":{"uniqueItems":true,"type":"string"},"type":"array","minItems":1},"timeout":{"default":1,"type":"number"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"healthy":{"properties":{"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[200,302]},"interval":{"minimum":1,"default":1,"type":"integer"},"successes":{"maximum":254,"minimum":1,"default":2,"type":"integer"}},"type":"object"},"port":{"maximum":65535,"minimum":1,"type":"integer"}},"type":"object"}}},"timeout":{"type":"object","required":["connect","send","read"],"properties":{"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"},"connect":{"exclusiveMinimum":0,"type":"number"}}},"labels":{"patternProperties":{".*":{"minLength":1,"maxLength":256,"description":"value of label","type":"string","pattern":"^\\S+$"}},"type":"object","description":"key/value pairs to specify attributes"},"pass_host":{"enum":["pass","node","rewrite"],"type":"string","default":"pass","description":"mod of host passing"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"update_time":{"type":"integer"},"discovery_type":{"type":"string","description":"discovery type"}}},"desc":{"maxLength":256,"type":"string"},"service_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"server_port":{"type":"integer","description":"server port"},"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"labels":{"patternProperties":{".*":{"minLength":1,"maxLength":256,"description":"value of label","type":"string","pattern":"^\\S+$"}},"type":"object","description":"key/value pairs to specify attributes"},"remote_addr":{"type":"string","anyOf":[{"title":"IPv4","type":"string","format":"ipv4"},{"title":"IPv4/CIDR","type":"string","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"title":"IPv6","type":"string","format":"ipv6"},{"title":"IPv6/CIDR","type":"string","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}],"description":"client IP"},"create_time":{"type":"integer"},"update_time":{"type":"integer"},"server_addr":{"type":"string","anyOf":[{"title":"IPv4","type":"string","format":"ipv4"},{"title":"IPv4/CIDR","type":"string","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"title":"IPv6","type":"string","format":"ipv6"},{"title":"IPv6/CIDR","type":"string","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}],"description":"server IP"}}},"consumer":{"additionalProperties":false,"type":"object","properties":{"group_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"plugins":{"type":"object"},"labels":{"patternProperties":{".*":{"minLength":1,"maxLength":256,"description":"value of label","type":"string","pattern":"^\\S+$"}},"type":"object","description":"key/value pairs to specify attributes"},"username":{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9_]+$","maxLength":100},"create_time":{"type":"integer"},"update_time":{"type":"integer"},"desc":{"maxLength":256,"type":"string"}},"required":["username"]}},"stream_plugins":{"ip-restriction":{"version":0.1,"priority":3000,"schema":{"properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"whitelist":{"items":{"anyOf":[{"title":"IPv4","type":"string","format":"ipv4"},{"title":"IPv4/CIDR","type":"string","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"title":"IPv6","type":"string","format":"ipv6"},{"title":"IPv6/CIDR","type":"string","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"type":"array","minItems":1},"blacklist":{"items":{"anyOf":[{"title":"IPv4","type":"string","format":"ipv4"},{"title":"IPv4/CIDR","type":"string","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"title":"IPv6","type":"string","format":"ipv6"},{"title":"IPv6/CIDR","type":"string","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"type":"array","minItems":1},"message":{"minLength":1,"type":"string","default":"Your IP address is not allowed","maxLength":1024}},"oneOf":[{"required":["whitelist"]},{"required":["blacklist"]}],"type":"object","$comment":"this is a mark for our injected plugin schema"}},"limit-conn":{"version":0.1,"priority":1003,"schema":{"required":["conn","burst","default_conn_delay","key"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"conn":{"exclusiveMinimum":0,"type":"integer"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"burst":{"minimum":0,"type":"integer"},"default_conn_delay":{"exclusiveMinimum":0,"type":"number"},"only_use_default_delay":{"default":false,"type":"boolean"},"key":{"type":"string"},"key_type":{"enum":["var","var_combination"],"type":"string","default":"var"}}}},"mqtt-proxy":{"version":0.1,"priority":1000,"schema":{"required":["protocol_name","protocol_level"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"protocol_name":{"type":"string"},"protocol_level":{"type":"integer"}}}},"syslog":{"priority":401,"version":0.1,"schema":{"required":["host","port"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"host":{"type":"string"},"name":{"type":"string","default":"stream sys logger"},"timeout":{"minimum":1,"default":3000,"type":"integer"},"retry_delay":{"minimum":0,"type":"integer","default":1},"max_retry_count":{"minimum":0,"type":"integer","default":0},"tls":{"default":false,"type":"boolean"},"log_format":{"type":"object"},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"flush_limit":{"minimum":1,"default":4096,"type":"integer"},"drop_limit":{"default":1048576,"type":"integer"},"sock_type":{"enum":["tcp","udp"],"default":"tcp","type":"string"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"port":{"type":"integer"},"pool_size":{"minimum":5,"default":5,"type":"integer"}}},"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"}}},"plugins":{"authz-keycloak":{"version":0.1,"priority":2000,"schema":{"encrypt_fields":["client_secret"],"properties":{"keepalive_pool":{"minimum":1,"default":5,"type":"integer"},"keepalive":{"default":true,"type":"boolean"},"discovery":{"minLength":1,"type":"string","maxLength":4096},"ssl_verify":{"default":true,"type":"boolean"},"resource_registration_endpoint":{"minLength":1,"type":"string","maxLength":4096},"client_secret":{"minLength":1,"type":"string","maxLength":100},"grant_type":{"enum":["urn:ietf:params:oauth:grant-type:uma-ticket"],"maxLength":100,"default":"urn:ietf:params:oauth:grant-type:uma-ticket","type":"string","minLength":1},"client_id":{"minLength":1,"type":"string","maxLength":100},"policy_enforcement_mode":{"enum":["ENFORCING","PERMISSIVE"],"type":"string","default":"ENFORCING"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"password_grant_token_generation_incoming_uri":{"minLength":1,"type":"string","maxLength":4096},"lazy_load_paths":{"default":false,"type":"boolean"},"http_method_as_scope":{"default":false,"type":"boolean"},"cache_ttl_seconds":{"minimum":1,"default":86400,"type":"integer"},"access_denied_redirect_uri":{"minLength":1,"type":"string","maxLength":2048},"access_token_expires_in":{"minimum":1,"default":300,"type":"integer"},"access_token_expires_leeway":{"minimum":0,"default":0,"type":"integer"},"timeout":{"minimum":1000,"default":3000,"type":"integer"},"refresh_token_expires_leeway":{"minimum":0,"default":0,"type":"integer"},"keepalive_timeout":{"minimum":1000,"default":60000,"type":"integer"},"refresh_token_expires_in":{"minimum":1,"default":3600,"type":"integer"},"token_endpoint":{"minLength":1,"type":"string","maxLength":4096},"permissions":{"items":{"minLength":1,"type":"string","maxLength":100},"type":"array","uniqueItems":true,"default":{}}},"allOf":[{"anyOf":[{"required":["discovery"]},{"required":["token_endpoint"]}]},{"anyOf":[{"properties":{"lazy_load_paths":{"enum":[false]}}},{"anyOf":[{"required":["discovery"]},{"required":["resource_registration_endpoint"]}],"properties":{"lazy_load_paths":{"enum":[true]}}}]}],"required":["client_id"],"$comment":"this is a mark for our injected plugin schema","type":"object"}},"elasticsearch-logger":{"priority":413,"version":0.1,"schema":{"encrypt_fields":["auth.password"],"properties":{"include_req_body":{"default":false,"type":"boolean"},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"field":{"type":"object","required":["index"],"properties":{"index":{"type":"string"},"type":{"type":"string"}}},"ssl_verify":{"default":true,"type":"boolean"},"endpoint_addrs":{"items":{"pattern":"[^/]$","type":"string"},"type":"array","minItems":1},"name":{"type":"string","default":"elasticsearch-logger"},"auth":{"type":"object","required":["username","password"],"properties":{"username":{"minLength":1,"type":"string"},"password":{"minLength":1,"type":"string"}}},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"endpoint_addr":{"pattern":"[^/]$","type":"string"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"log_format":{"type":"object"},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"timeout":{"minimum":1,"default":10,"type":"integer"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"retry_delay":{"minimum":0,"type":"integer","default":1},"buffer_duration":{"minimum":1,"type":"integer","default":60},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"include_resp_body":{"default":false,"type":"boolean"}},"oneOf":[{"required":["endpoint_addr","field"]},{"required":["endpoint_addrs","field"]}],"type":"object","$comment":"this is a mark for our injected plugin schema"},"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"}},"syslog":{"priority":401,"version":0.1,"schema":{"required":["host","port"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"include_req_body":{"default":false,"type":"boolean"},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"name":{"type":"string","default":"sys logger"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"drop_limit":{"default":1048576,"type":"integer"},"host":{"type":"string"},"include_resp_body":{"default":false,"type":"boolean"},"flush_limit":{"minimum":1,"default":4096,"type":"integer"},"timeout":{"minimum":1,"default":3000,"type":"integer"},"sock_type":{"enum":["tcp","udp"],"default":"tcp","type":"string"},"tls":{"default":false,"type":"boolean"},"log_format":{"type":"object"},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"retry_delay":{"minimum":0,"type":"integer","default":1},"buffer_duration":{"minimum":1,"type":"integer","default":60},"port":{"type":"integer"},"pool_size":{"minimum":5,"default":5,"type":"integer"}}},"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"}},"ext-plugin-pre-req":{"version":0.1,"priority":12000,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"conf":{"items":{"type":"object","required":["name","value"],"properties":{"value":{"type":"string"},"name":{"minLength":1,"maxLength":128,"type":"string"}}},"type":"array","minItems":1},"allow_degradation":{"default":false,"type":"boolean"}}}},"google-cloud-logging":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"schema":{"encrypt_fields":["auth_config.private_key"],"properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"log_format":{"type":"object"},"auth_file":{"type":"string"},"log_id":{"default":"apisix.apache.org%2Flogs","type":"string"},"auth_config":{"type":"object","required":["client_email","private_key","project_id","token_uri"],"properties":{"client_email":{"type":"string"},"private_key":{"type":"string"},"project_id":{"type":"string"},"token_uri":{"default":"https://oauth2.googleapis.com/token","type":"string"},"scopes":{"items":{"type":"string","description":"Google OAuth2 Authorization Scopes"},"minItems":1,"type":"array","uniqueItems":true,"default":["https://www.googleapis.com/auth/logging.read","https://www.googleapis.com/auth/logging.write","https://www.googleapis.com/auth/logging.admin","https://www.googleapis.com/auth/cloud-platform"]},"entries_uri":{"default":"https://logging.googleapis.com/v2/entries:write","type":"string"}}},"retry_delay":{"minimum":0,"type":"integer","default":1},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"resource":{"required":["type"],"type":"object","default":{"type":"global"},"properties":{"labels":{"type":"object"},"type":{"type":"string"}}},"buffer_duration":{"minimum":1,"type":"integer","default":60},"ssl_verify":{"default":true,"type":"boolean"},"name":{"type":"string","default":"google-cloud-logging"}},"oneOf":[{"required":["auth_config"]},{"required":["auth_file"]}],"type":"object","$comment":"this is a mark for our injected plugin schema"},"priority":407},"jwt-auth":{"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"cookie":{"default":"jwt","type":"string"},"hide_credentials":{"default":false,"type":"boolean"},"header":{"default":"authorization","type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"query":{"default":"jwt","type":"string"}}},"priority":2510,"version":0.1,"consumer_schema":{"encrypt_fields":["secret","private_key"],"properties":{"secret":{"type":"string"},"exp":{"minimum":1,"default":86400,"type":"integer"},"base64_secret":{"default":false,"type":"boolean"},"algorithm":{"enum":["HS256","HS512","RS256","ES256"],"type":"string","default":"HS256"},"key":{"type":"string"},"lifetime_grace_period":{"minimum":0,"default":0,"type":"integer"}},"type":"object","dependencies":{"algorithm":{"oneOf":[{"properties":{"algorithm":{"enum":["HS256","HS512"],"default":"HS256"}}},{"required":["public_key","private_key"],"properties":{"public_key":{"type":"string"},"algorithm":{"enum":["RS256","ES256"]},"private_key":{"type":"string"}}}]}},"required":["key"]},"type":"auth"},"serverless-post-function":{"version":0.1,"schema":{"required":["functions"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"phase":{"enum":["rewrite","access","header_filter","body_filter","log","before_proxy"],"default":"access","type":"string"},"functions":{"items":{"type":"string"},"type":"array","minItems":1},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}},"priority":-2000},"jwe-decrypt":{"schema":{"required":["header","forward_header"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"strict":{"default":true,"type":"boolean"},"forward_header":{"default":"Authorization","type":"string"},"header":{"default":"Authorization","type":"string"}}},"priority":2509,"version":0.1,"consumer_schema":{"type":"object","required":["key","secret"],"properties":{"is_base64_encoded":{"type":"boolean"},"secret":{"type":"string"},"key":{"type":"string"}}},"type":"auth"},"consumer-restriction":{"version":0.1,"priority":2400,"schema":{"$comment":"this is a mark for our injected plugin schema","type":"object","anyOf":[{"required":["blacklist"]},{"required":["whitelist"]},{"required":["allowed_by_methods"]}],"properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"rejected_msg":{"type":"string"},"rejected_code":{"minimum":200,"default":403,"type":"integer"},"type":{"enum":["consumer_name","service_id","route_id","consumer_group_id"],"type":"string","default":"consumer_name"},"whitelist":{"items":{"type":"string"},"type":"array","minItems":1},"allowed_by_methods":{"items":{"properties":{"user":{"type":"string"},"methods":{"items":{"enum":["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE","PURGE"],"type":"string","description":"HTTP method"},"type":"array","minItems":1}},"type":"object"},"type":"array"},"blacklist":{"items":{"type":"string"},"type":"array","minItems":1}}}},"forward-auth":{"version":0.1,"priority":2002,"schema":{"required":["uri"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"keepalive_pool":{"minimum":1,"default":5,"type":"integer"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"status_on_error":{"maximum":599,"minimum":200,"default":403,"type":"integer"},"keepalive_timeout":{"minimum":1000,"default":60000,"type":"integer"},"keepalive":{"default":true,"type":"boolean"},"upstream_headers":{"items":{"type":"string"},"default":{},"type":"array","description":"authorization response header that will be sent to the upstream"},"timeout":{"minimum":1,"description":"timeout in milliseconds","maximum":60000,"default":3000,"type":"integer"},"client_headers":{"items":{"type":"string"},"default":{},"type":"array","description":"authorization response header that will be sent tothe client when authorizing failed"},"ssl_verify":{"default":true,"type":"boolean"},"uri":{"type":"string"},"request_method":{"enum":["GET","POST"],"default":"GET","type":"string","description":"the method for client to request the authorization service"},"request_headers":{"items":{"type":"string"},"default":{},"type":"array","description":"client request header that will be sent to the authorization service"},"allow_degradation":{"default":false,"type":"boolean"}}}},"skywalking-logger":{"priority":408,"version":0.1,"schema":{"required":["endpoint_addr"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"service_name":{"default":"APISIX","type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"service_instance_name":{"default":"APISIX Instance Name","type":"string"},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"retry_delay":{"minimum":0,"type":"integer","default":1},"include_req_body":{"default":false,"type":"boolean"},"log_format":{"type":"object"},"endpoint_addr":{"pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"timeout":{"minimum":1,"default":3,"type":"integer"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"include_resp_body":{"default":false,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"name":{"type":"string","default":"skywalking logger"}}},"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"}},"loggly":{"priority":411,"version":0.1,"schema":{"required":["customer_token"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"severity":{"enum":["ALERT","alert","CRIT","crit","EMEGR","emegr","WARNING","warning","NOTICE","notice","INFO","info","DEBUG","debug","ERR","err"],"default":"INFO","type":"string","description":"base severity log level"},"include_req_body":{"default":false,"type":"boolean"},"tags":{"items":{"pattern":"^(?!tag=)[ -~]*","type":"string"},"type":"array","minItems":1,"default":["apisix"]},"severity_map":{"patternProperties":{"^[1-5][0-9]{2}$":{"enum":["ALERT","alert","CRIT","crit","EMEGR","emegr","WARNING","warning","NOTICE","notice","INFO","info","DEBUG","debug","ERR","err"],"type":"string","description":"keys are HTTP status code, values are severity"}},"type":"object","additionalProperties":false,"description":"upstream response code vs syslog severity mapping"},"ssl_verify":{"default":true,"type":"boolean"},"name":{"type":"string","default":"loggly"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"log_format":{"type":"object"},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"include_resp_body":{"default":false,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"customer_token":{"type":"string"},"retry_delay":{"minimum":0,"type":"integer","default":1}}},"metadata_schema":{"properties":{"log_format":{"type":"object"},"timeout":{"minimum":1,"default":5000,"type":"integer"},"host":{"default":"logs-01.loggly.com","type":"string"},"port":{"default":514,"type":"integer"},"protocol":{"enum":["syslog","http","https"],"default":"syslog","type":"string"}},"type":"object"}},"openid-connect":{"version":0.2,"priority":2599,"schema":{"encrypt_fields":["client_secret"],"properties":{"realm":{"default":"apisix","type":"string"},"logout_path":{"default":"/logout","type":"string"},"introspection_interval":{"type":"integer","default":0,"description":"TTL of the cached and introspected access token in seconds."},"redirect_uri":{"description":"auto append '.apisix/redirect' to ngx.var.uri if not configured","type":"string"},"introspection_expiry_claim":{"type":"string","description":"Name of the expiry claim that controls the cached access token TTL."},"post_logout_redirect_uri":{"description":"the URI will be redirect when request logout_path","type":"string"},"required_scopes":{"items":{"type":"string"},"type":"array","description":"List of scopes that are required to be granted to the access token"},"unauth_action":{"enum":["auth","deny","pass"],"default":"auth","type":"string","description":"The action performed when client is not authorized. Use auth to redirect user to identity provider, deny to respond with 401 Unauthorized, and pass to allow the request regardless."},"public_key":{"type":"string"},"ssl_verify":{"default":false,"type":"boolean"},"use_pkce":{"type":"boolean","default":false,"description":"when set to true the PKEC(Proof Key for Code Exchange) will be used."},"client_secret":{"type":"string"},"set_access_token_header":{"type":"boolean","default":true,"description":"Whether the access token should be added as a header to the request for downstream"},"access_token_in_authorization_header":{"type":"boolean","default":false,"description":"Whether the access token should be added in the Authorization header as opposed to the X-Access-Token header."},"set_id_token_header":{"type":"boolean","default":true,"description":"Whether the ID token should be added in the X-ID-Token header to the request for downstream."},"access_token_expires_in":{"type":"integer","description":"Lifetime of the access token in seconds if expires_in is not present."},"access_token_expires_leeway":{"type":"integer","default":0,"description":"Expiration leeway in seconds for access token renewal."},"scope":{"default":"openid","type":"string"},"set_refresh_token_header":{"type":"boolean","default":false,"description":"Whether the refresh token should be added in the X-Refresh-Token header to the request for downstream."},"authorization_params":{"type":"object","description":"Extra authorization params to the authorize endpoint"},"proxy_opts":{"type":"object","properties":{"http_proxy":{"description":"HTTP proxy like: http://proxy-server:80.","type":"string"},"https_proxy":{"description":"HTTPS proxy like: http://proxy-server:80.","type":"string"},"no_proxy":{"description":"Comma separated list of hosts that should not be proxied.","type":"string"},"https_proxy_authorization":{"description":"Basic [base64 username:password].","type":"string"},"http_proxy_authorization":{"description":"Basic [base64 username:password].","type":"string"}},"description":"HTTP proxy server be used to access identity server."},"client_rsa_private_key":{"type":"string","description":"Client RSA private key used to sign JWT."},"client_rsa_private_key_id":{"type":"string","description":"Client RSA private key ID used to compute a signed JWT."},"client_jwt_assertion_expires_in":{"type":"integer","default":60,"description":"Life duration of the signed JWT in seconds."},"renew_access_token_on_expiry":{"type":"boolean","default":true,"description":"Whether to attempt silently renewing the access token."},"discovery":{"type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"refresh_session_interval":{"type":"integer","description":"Time interval to refresh user ID token without re-authentication."},"cache_segment":{"type":"string","description":"Name of a cache segment to differentiate caches."},"iat_slack":{"type":"integer","default":120,"description":"Tolerance of clock skew in seconds with the iat claim in an ID token."},"client_id":{"type":"string"},"accept_none_alg":{"type":"boolean","default":false,"description":"Set to true if the OpenID provider does not sign its ID token."},"token_signing_alg_values_expected":{"type":"string"},"accept_unsupported_alg":{"type":"boolean","default":true,"description":"Ignore ID token signature to accept unsupported signature algorithm."},"jwk_expires_in":{"type":"integer","default":86400,"description":"Expiration time for JWK cache in seconds."},"revoke_tokens_on_logout":{"type":"boolean","default":false,"description":"Notify authorization server a previous token is no longer needed."},"force_reauthorize":{"type":"boolean","default":false,"description":"Whether to execute the authorization flow when a token has been cached."},"use_nonce":{"type":"boolean","default":false,"description":"Whether to include nonce parameter in authorization request."},"introspection_endpoint":{"type":"string"},"introspection_endpoint_auth_method":{"default":"client_secret_basic","type":"string"},"timeout":{"type":"integer","minimum":1,"default":3,"description":"timeout in seconds"},"token_endpoint_auth_method":{"default":"client_secret_basic","type":"string"},"bearer_only":{"default":false,"type":"boolean"},"session":{"additionalProperties":false,"type":"object","required":["secret"],"properties":{"cookie":{"properties":{"lifetime":{"description":"it holds the cookie lifetime in seconds in the future","type":"integer"}},"type":"object"},"secret":{"minLength":16,"type":"string","description":"the key used for the encrypt and HMAC calculation"}}},"jwt_verification_cache_ignore":{"type":"boolean","default":false,"description":"Whether to ignore cached verification and re-verify."},"set_userinfo_header":{"type":"boolean","default":true,"description":"Whether the user info token should be added in the X-Userinfo header to the request for downstream."}},"required":["client_id","client_secret","discovery"],"$comment":"this is a mark for our injected plugin schema","type":"object"}},"fault-injection":{"version":0.1,"priority":11000,"schema":{"properties":{"abort":{"type":"object","required":["http_status"],"properties":{"percentage":{"maximum":100,"minimum":0,"type":"integer"},"headers":{"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"minProperties":1,"type":"object"},"vars":{"items":{"type":"array"},"type":"array","maxItems":20},"http_status":{"minimum":200,"type":"integer"},"body":{"minLength":0,"type":"string"}}},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"delay":{"type":"object","required":["duration"],"properties":{"percentage":{"maximum":100,"minimum":0,"type":"integer"},"duration":{"minimum":0,"type":"number"},"vars":{"items":{"type":"array"},"type":"array","maxItems":20}}}},"minProperties":1,"$comment":"this is a mark for our injected plugin schema","type":"object"}},"tencent-cloud-cls":{"priority":397,"version":0.1,"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"schema":{"encrypt_fields":["secret_key"],"properties":{"secret_key":{"type":"string"},"cls_host":{"type":"string"},"cls_topic":{"type":"string"},"secret_id":{"type":"string"},"sample_ratio":{"maximum":1,"minimum":1e-05,"default":1,"type":"number"},"global_tag":{"type":"object"},"include_req_body":{"default":false,"type":"boolean"},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"name":{"type":"string","default":"tencent-cloud-cls"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"log_format":{"type":"object"},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"include_resp_body":{"default":false,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"retry_delay":{"minimum":0,"type":"integer","default":1}},"required":["cls_host","cls_topic","secret_id","secret_key"],"$comment":"this is a mark for our injected plugin schema","type":"object"}},"example-plugin":{"priority":0,"version":0.1,"schema":{"required":["i"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"t":{"minItems":1,"type":"array"},"i":{"minimum":0,"type":"number"},"ip":{"type":"string"},"s":{"type":"string"},"port":{"type":"integer"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}},"metadata_schema":{"type":"object","required":["ikey","skey"],"properties":{"skey":{"type":"string"},"ikey":{"minimum":0,"type":"number"}}}},"ldap-auth":{"schema":{"properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"base_dn":{"type":"string"},"ldap_uri":{"type":"string"},"use_tls":{"default":false,"type":"boolean"},"tls_verify":{"default":false,"type":"boolean"},"uid":{"default":"cn","type":"string"}},"title":"work with route or service object","type":"object","$comment":"this is a mark for our injected plugin schema","required":["base_dn","ldap_uri"]},"priority":2540,"version":0.1,"consumer_schema":{"title":"work with consumer object","type":"object","required":["user_dn"],"properties":{"user_dn":{"type":"string"}}},"type":"auth"},"clickhouse-logger":{"priority":398,"version":0.1,"schema":{"encrypt_fields":["password"],"properties":{"include_req_body":{"default":false,"type":"boolean"},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"ssl_verify":{"default":true,"type":"boolean"},"endpoint_addrs":{"items":{"pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"type":"array","minItems":1},"name":{"default":"clickhouse-logger","type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"logtable":{"default":"","type":"string"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"retry_delay":{"minimum":0,"type":"integer","default":1},"user":{"default":"","type":"string"},"database":{"default":"","type":"string"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"log_format":{"type":"object"},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"include_resp_body":{"default":false,"type":"boolean"},"password":{"default":"","type":"string"},"endpoint_addr":{"pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"timeout":{"minimum":1,"default":3,"type":"integer"}},"oneOf":[{"required":["endpoint_addr","user","password","database","logtable"]},{"required":["endpoint_addrs","user","password","database","logtable"]}],"type":"object","$comment":"this is a mark for our injected plugin schema"},"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"}},"echo":{"version":0.1,"priority":412,"schema":{"anyOf":[{"required":["before_body"]},{"required":["body"]},{"required":["after_body"]}],"properties":{"before_body":{"type":"string","description":"body before the filter phase."},"headers":{"type":"object","minProperties":1,"description":"new headers for response"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"after_body":{"type":"string","description":"body after the modification of filter phase."},"body":{"type":"string","description":"body to replace upstream response."}},"minProperties":1,"$comment":"this is a mark for our injected plugin schema","type":"object"}},"serverless-pre-function":{"version":0.1,"schema":{"required":["functions"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"phase":{"enum":["rewrite","access","header_filter","body_filter","log","before_proxy"],"default":"access","type":"string"},"functions":{"items":{"type":"string"},"type":"array","minItems":1},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}},"priority":10000},"kafka-proxy":{"version":0.1,"priority":508,"schema":{"$comment":"this is a mark for our injected plugin schema","type":"object","encrypt_fields":["sasl.password"],"properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"sasl":{"type":"object","required":["username","password"],"properties":{"username":{"type":"string"},"password":{"type":"string"}}}}}},"proxy-rewrite":{"version":0.1,"priority":1008,"schema":{"minProperties":1,"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"host":{"type":"string","pattern":"^[0-9a-zA-Z-.]+(:\\d{1,5})?$","description":"new host for upstream"},"headers":{"oneOf":[{"properties":{"add":{"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"minProperties":1,"type":"object"},"set":{"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"minProperties":1,"type":"object"},"remove":{"items":{"pattern":"^[^:]+$","type":"string"},"type":"array","minItems":1}},"minProperties":1,"type":"object","additionalProperties":false},{"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"minProperties":1,"type":"object"}],"description":"new headers for request"},"uri":{"minLength":1,"maxLength":4096,"description":"new uri for upstream","type":"string","pattern":"^\\/.*"},"use_real_request_uri_unsafe":{"type":"boolean","default":false,"description":"use real_request_uri instead, THIS IS VERY UNSAFE."},"method":{"enum":["UNLOCK","PATCH","TRACE","GET","HEAD","POST","PUT","DELETE","MKCOL","COPY","MOVE","OPTIONS","PROPFIND","LOCK"],"type":"string","description":"proxy route method"},"regex_uri":{"items":{"type":"string","description":"regex uri"},"type":"array","minItems":2,"description":"new uri that substitute from client uri for upstream, lower priority than uri property"}}}},"authz-casdoor":{"version":0.1,"priority":2559,"schema":{"encrypt_fields":["client_secret"],"properties":{"client_id":{"type":"string"},"endpoint_addr":{"pattern":"^[^%?]+[^/]$","type":"string"},"callback_url":{"pattern":"^[^%?]+[^/]$","type":"string"},"client_secret":{"type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"required":["callback_url","endpoint_addr","client_id","client_secret"],"$comment":"this is a mark for our injected plugin schema","type":"object"}},"grpc-web":{"version":0.1,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"cors_allow_headers":{"type":"string","default":"content-type,x-grpc-web,x-user-agent","description":"multiple header use ',' to split. default: content-type,x-grpc-web,x-user-agent."},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}},"priority":505},"loki-logger":{"priority":414,"version":0.1,"schema":{"required":["endpoint_addrs"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"keepalive_pool":{"minimum":1,"default":5,"type":"integer"},"include_req_body":{"default":false,"type":"boolean"},"endpoint_uri":{"minLength":1,"type":"string","default":"/loki/api/v1/push"},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"tenant_id":{"default":"fake","type":"string"},"log_labels":{"patternProperties":{".*":{"minLength":1,"type":"string"}},"type":"object","default":{"job":"apisix"}},"endpoint_addrs":{"items":{"pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"type":"array","minItems":1},"name":{"type":"string","default":"loki logger"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"keepalive":{"default":true,"type":"boolean"},"timeout":{"minimum":1,"description":"timeout in milliseconds","maximum":60000,"default":3000,"type":"integer"},"retry_delay":{"minimum":0,"type":"integer","default":1},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"log_format":{"type":"object"},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"include_resp_body":{"default":false,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"keepalive_timeout":{"type":"integer","minimum":1000,"default":60000,"description":"keepalive timeout in milliseconds"},"ssl_verify":{"default":false,"type":"boolean"}}},"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"}},"ai":{"priority":22900,"version":0.1,"scope":"global","schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}}},"multi-auth":{"type":"auth","version":0.1,"schema":{"properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"auth_plugins":{"minItems":2,"type":"array"}},"title":"work with route or service object","type":"object","$comment":"this is a mark for our injected plugin schema","required":["auth_plugins"]},"priority":2600},"kafka-logger":{"priority":403,"version":0.1,"schema":{"oneOf":[{"required":["broker_list","kafka_topic"]},{"required":["brokers","kafka_topic"]}],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"broker_list":{"patternProperties":{".*":{"maximum":65535,"type":"integer","minimum":1,"description":"the port of kafka broker"}},"minProperties":1,"type":"object"},"kafka_topic":{"type":"string"},"producer_type":{"enum":["async","sync"],"default":"async","type":"string"},"key":{"type":"string"},"cluster_name":{"minimum":1,"default":1,"type":"integer"},"producer_batch_num":{"minimum":1,"default":200,"type":"integer"},"producer_batch_size":{"minimum":0,"default":1048576,"type":"integer"},"meta_format":{"enum":["default","origin"],"default":"default","type":"string"},"producer_time_linger":{"minimum":1,"default":1,"type":"integer"},"brokers":{"items":{"type":"object","required":["host","port"],"properties":{"port":{"maximum":65535,"minimum":1,"type":"integer","description":"the port of kafka broker"},"host":{"description":"the host of kafka broker","type":"string"},"sasl_config":{"required":["user","password"],"type":"object","properties":{"mechanism":{"enum":["PLAIN"],"default":"PLAIN","type":"string"},"password":{"description":"password","type":"string"},"user":{"description":"user","type":"string"}},"description":"sasl config"}}},"type":"array","minItems":1,"uniqueItems":true},"name":{"type":"string","default":"kafka logger"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"meta_refresh_interval":{"minimum":1,"default":30,"type":"integer"},"required_acks":{"enum":[1,-1],"default":1,"type":"integer"},"retry_delay":{"minimum":0,"type":"integer","default":1},"producer_max_buffering":{"minimum":1,"default":50000,"type":"integer"},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"log_format":{"type":"object"},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"timeout":{"minimum":1,"default":3,"type":"integer"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"include_resp_body":{"default":false,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"include_req_body":{"default":false,"type":"boolean"}}},"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"}},"sls-logger":{"version":0.1,"priority":406,"schema":{"encrypt_fields":["access_key_secret"],"properties":{"include_req_body":{"default":false,"type":"boolean"},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"name":{"type":"string","default":"sls-logger"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"host":{"type":"string"},"include_resp_body":{"default":false,"type":"boolean"},"project":{"type":"string"},"logstore":{"type":"string"},"access_key_id":{"type":"string"},"access_key_secret":{"type":"string"},"log_format":{"type":"object"},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"retry_delay":{"minimum":0,"type":"integer","default":1},"buffer_duration":{"minimum":1,"type":"integer","default":60},"port":{"type":"integer"},"timeout":{"minimum":1,"default":5000,"type":"integer"}},"required":["host","port","project","logstore","access_key_id","access_key_secret"],"$comment":"this is a mark for our injected plugin schema","type":"object"}},"proxy-cache":{"version":0.2,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"cache_key":{"items":{"type":"string","pattern":"(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)","description":"a key for caching"},"type":"array","minItems":1,"default":["$host","$request_uri"]},"cache_ttl":{"minimum":1,"default":300,"type":"integer"},"cache_http_status":{"items":{"maximum":599,"type":"integer","minimum":200,"description":"http response status"},"minItems":1,"type":"array","uniqueItems":true,"default":[200,301,404]},"cache_method":{"items":{"enum":["GET","POST","HEAD"],"type":"string","description":"supported http method"},"minItems":1,"type":"array","uniqueItems":true,"default":["GET","HEAD"]},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"hide_cache_headers":{"default":false,"type":"boolean"},"cache_control":{"default":false,"type":"boolean"},"cache_bypass":{"items":{"pattern":"(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)","type":"string"},"type":"array","minItems":1},"no_cache":{"items":{"pattern":"(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)","type":"string"},"type":"array","minItems":1},"cache_zone":{"minLength":1,"type":"string","default":"disk_cache_one","maxLength":100},"cache_strategy":{"enum":["disk","memory"],"type":"string","default":"disk"}}},"priority":1085},"zipkin":{"version":0.1,"schema":{"required":["endpoint","sample_ratio"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"service_name":{"type":"string","default":"APISIX","description":"service name for zipkin reporter"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"sample_ratio":{"maximum":1,"minimum":1e-05,"type":"number"},"span_version":{"enum":[1,2],"default":2},"endpoint":{"type":"string"},"server_addr":{"type":"string","pattern":"^[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}$","description":"default is $server_addr, you can specify your external ip address"}}},"priority":12011},"opa":{"version":0.1,"priority":2001,"schema":{"required":["host","policy"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"keepalive_pool":{"minimum":1,"default":5,"type":"integer"},"send_headers_upstream":{"items":{"type":"string"},"type":"array","minItems":1,"description":"list of headers to pass to upstream in request"},"with_route":{"default":false,"type":"boolean"},"with_service":{"default":false,"type":"boolean"},"with_consumer":{"default":false,"type":"boolean"},"keepalive":{"default":true,"type":"boolean"},"timeout":{"minimum":1,"description":"timeout in milliseconds","maximum":60000,"default":3000,"type":"integer"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"ssl_verify":{"default":true,"type":"boolean"},"host":{"type":"string"},"policy":{"type":"string"},"keepalive_timeout":{"minimum":1000,"default":60000,"type":"integer"}}}},"ext-plugin-post-req":{"version":0.1,"priority":-3000,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"conf":{"items":{"type":"object","required":["name","value"],"properties":{"value":{"type":"string"},"name":{"minLength":1,"maxLength":128,"type":"string"}}},"type":"array","minItems":1},"allow_degradation":{"default":false,"type":"boolean"}}}},"openfunction":{"version":0.1,"priority":-1902,"schema":{"required":["function_uri"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"keepalive":{"default":true,"type":"boolean"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"timeout":{"minimum":100,"default":3000,"type":"integer"},"authorization":{"service_token":{"type":"string"}},"ssl_verify":{"default":true,"type":"boolean"},"keepalive_pool":{"minimum":1,"default":5,"type":"integer"},"keepalive_timeout":{"minimum":1000,"default":60000,"type":"integer"},"function_uri":{"type":"string"}}}},"inspect":{"version":0.1,"priority":200,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}}},"key-auth":{"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"header":{"default":"apikey","type":"string"},"hide_credentials":{"default":false,"type":"boolean"},"query":{"default":"apikey","type":"string"}}},"priority":2500,"version":0.1,"consumer_schema":{"required":["key"],"type":"object","encrypt_fields":["key"],"properties":{"key":{"type":"string"}}},"type":"auth"},"mocking":{"version":0.1,"priority":10900,"schema":{"$comment":"this is a mark for our injected plugin schema","type":"object","anyOf":[{"required":["response_example"]},{"required":["response_schema"]}],"properties":{"response_status":{"default":200,"minimum":100,"type":"integer"},"content_type":{"default":"application/json;charset=utf8","type":"string"},"response_example":{"type":"string"},"response_schema":{"type":"object"},"delay":{"default":0,"type":"integer"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"response_headers":{"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"minProperties":1,"type":"object"},"with_mock_header":{"default":true,"type":"boolean"}}}},"proxy-control":{"version":0.1,"priority":21990,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"request_buffering":{"default":true,"type":"boolean"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}}},"udp-logger":{"schema":{"required":["host","port"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"host":{"type":"string"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"retry_delay":{"minimum":0,"type":"integer","default":1},"include_req_body":{"default":false,"type":"boolean"},"log_format":{"type":"object"},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"timeout":{"minimum":1,"default":3,"type":"integer"},"max_retry_count":{"minimum":0,"type":"integer","default":0},"include_resp_body":{"default":false,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"port":{"minimum":0,"type":"integer"},"name":{"type":"string","default":"udp logger"}}},"version":0.1,"priority":400,"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"}},"openwhisk":{"version":0.1,"priority":-1901,"schema":{"required":["api_host","service_token","namespace","action"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"keepalive_pool":{"minimum":1,"default":5,"type":"integer"},"action":{"maxLength":256,"pattern":"\\A([\\w]|[\\w][\\w@ .-]*[\\w@.-]+)\\z","type":"string"},"result":{"default":true,"type":"boolean"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"namespace":{"maxLength":256,"pattern":"\\A([\\w]|[\\w][\\w@ .-]*[\\w@.-]+)\\z","type":"string"},"keepalive_timeout":{"minimum":1000,"default":60000,"type":"integer"},"timeout":{"minimum":1,"description":"timeout in milliseconds","maximum":60000,"default":3000,"type":"integer"},"service_token":{"type":"string"},"package":{"maxLength":256,"pattern":"\\A([\\w]|[\\w][\\w@ .-]*[\\w@.-]+)\\z","type":"string"},"keepalive":{"default":true,"type":"boolean"},"ssl_verify":{"default":true,"type":"boolean"},"api_host":{"type":"string"}}}},"prometheus":{"version":0.2,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"prefer_name":{"default":false,"type":"boolean"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}},"priority":500},"basic-auth":{"schema":{"title":"work with route or service object","type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"hide_credentials":{"default":false,"type":"boolean"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}},"priority":2520,"version":0.1,"consumer_schema":{"encrypt_fields":["password"],"properties":{"username":{"type":"string"},"password":{"type":"string"}},"title":"work with consumer object","type":"object","required":["username","password"]},"type":"auth"},"ip-restriction":{"version":0.1,"priority":3000,"schema":{"properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"whitelist":{"items":{"anyOf":[{"title":"IPv4","type":"string","format":"ipv4"},{"title":"IPv4/CIDR","type":"string","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"title":"IPv6","type":"string","format":"ipv6"},{"title":"IPv6/CIDR","type":"string","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"type":"array","minItems":1},"blacklist":{"items":{"anyOf":[{"title":"IPv4","type":"string","format":"ipv4"},{"title":"IPv4/CIDR","type":"string","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"title":"IPv6","type":"string","format":"ipv6"},{"title":"IPv6/CIDR","type":"string","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"type":"array","minItems":1},"message":{"minLength":1,"type":"string","default":"Your IP address is not allowed","maxLength":1024}},"oneOf":[{"required":["whitelist"]},{"required":["blacklist"]}],"type":"object","$comment":"this is a mark for our injected plugin schema"}},"aws-lambda":{"version":0.1,"priority":-1899,"schema":{"required":["function_uri"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"keepalive":{"default":true,"type":"boolean"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"timeout":{"minimum":100,"default":3000,"type":"integer"},"authorization":{"properties":{"apikey":{"type":"string"},"iam":{"type":"object","required":["accesskey","secretkey"],"properties":{"service":{"default":"execute-api","type":"string","description":"the service that is receiving the request"},"accesskey":{"description":"access key id from from aws iam console","type":"string"},"aws_region":{"default":"us-east-1","type":"string","description":"the aws region that is receiving the request"},"secretkey":{"description":"secret access key from from aws iam console","type":"string"}}}},"type":"object"},"ssl_verify":{"default":true,"type":"boolean"},"keepalive_pool":{"minimum":1,"default":5,"type":"integer"},"keepalive_timeout":{"minimum":1000,"default":60000,"type":"integer"},"function_uri":{"type":"string"}}}},"splunk-hec-logging":{"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"},"version":0.1,"schema":{"required":["endpoint"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"endpoint":{"type":"object","required":["uri","token"],"properties":{"uri":{"pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"timeout":{"minimum":1,"default":10,"type":"integer"},"token":{"type":"string"},"channel":{"type":"string"}}},"log_format":{"type":"object"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"ssl_verify":{"default":true,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"retry_delay":{"minimum":0,"type":"integer","default":1},"name":{"type":"string","default":"splunk-hec-logging"}}},"priority":409},"rocketmq-logger":{"priority":402,"version":0.1,"schema":{"encrypt_fields":["secret_key"],"properties":{"secret_key":{"default":"","type":"string"},"tag":{"type":"string"},"key":{"type":"string"},"include_req_body":{"default":false,"type":"boolean"},"access_key":{"default":"","type":"string"},"meta_format":{"enum":["default","origin"],"default":"default","type":"string"},"nameserver_list":{"items":{"type":"string"},"type":"array","minItems":1},"use_tls":{"default":false,"type":"boolean"},"name":{"type":"string","default":"rocketmq logger"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"retry_delay":{"minimum":0,"type":"integer","default":1},"topic":{"type":"string"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"log_format":{"type":"object"},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"include_resp_body":{"default":false,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"timeout":{"minimum":1,"default":3,"type":"integer"},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1}},"required":["nameserver_list","topic"],"$comment":"this is a mark for our injected plugin schema","type":"object"},"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"}},"http-logger":{"priority":410,"version":0.1,"schema":{"required":["uri"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"concat_method":{"enum":["json","new_line"],"default":"json","type":"string"},"include_req_body":{"default":false,"type":"boolean"},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"auth_header":{"type":"string"},"name":{"type":"string","default":"http logger"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"include_resp_body":{"default":false,"type":"boolean"},"uri":{"pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?","type":"string"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"log_format":{"type":"object"},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"retry_delay":{"minimum":0,"type":"integer","default":1},"buffer_duration":{"minimum":1,"type":"integer","default":60},"timeout":{"minimum":1,"default":3,"type":"integer"},"ssl_verify":{"default":false,"type":"boolean"}}},"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"}},"workflow":{"version":0.1,"priority":1006,"schema":{"required":["rules"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"rules":{"items":{"type":"object","required":["case","actions"],"properties":{"case":{"items":{"anyOf":[{"type":"array"},{"type":"string"}]},"type":"array","minItems":1},"actions":{"items":{"minItems":1,"type":"array"},"type":"array"}}},"type":"array"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}}},"hmac-auth":{"schema":{"title":"work with route or service object","type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}},"priority":2530,"version":0.1,"consumer_schema":{"encrypt_fields":["secret_key"],"properties":{"secret_key":{"minLength":1,"type":"string","maxLength":256},"validate_request_body":{"title":"A boolean value telling the plugin to enable body validation","type":"boolean","default":false},"max_req_body":{"title":"Max request body size","type":"integer","default":524288},"algorithm":{"enum":["hmac-sha1","hmac-sha256","hmac-sha512"],"type":"string","default":"hmac-sha256"},"access_key":{"minLength":1,"type":"string","maxLength":256},"encode_uri_params":{"title":"Whether to escape the uri parameter","type":"boolean","default":true},"clock_skew":{"default":0,"type":"integer"},"keep_headers":{"title":"whether to keep the http request header","type":"boolean","default":false},"signed_headers":{"items":{"minLength":1,"type":"string","maxLength":50},"type":"array"}},"title":"work with consumer object","type":"object","required":["access_key","secret_key"]},"type":"auth"},"limit-conn":{"version":0.1,"priority":1003,"schema":{"if":{"properties":{"policy":{"enum":["redis"]}}},"else":{"if":{"properties":{"policy":{"enum":["redis-cluster"]}}},"then":{"required":["redis_cluster_nodes","redis_cluster_name"],"properties":{"redis_cluster_nodes":{"items":{"minLength":2,"type":"string","maxLength":100},"type":"array","minItems":1},"redis_cluster_name":{"type":"string"},"redis_cluster_ssl":{"default":false,"type":"boolean"},"redis_password":{"minLength":0,"type":"string"},"redis_timeout":{"minimum":1,"default":1000,"type":"integer"},"redis_cluster_ssl_verify":{"default":false,"type":"boolean"}}}},"properties":{"conn":{"exclusiveMinimum":0,"type":"integer"},"burst":{"minimum":0,"type":"integer"},"default_conn_delay":{"exclusiveMinimum":0,"type":"number"},"only_use_default_delay":{"default":false,"type":"boolean"},"key":{"type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"allow_degradation":{"default":false,"type":"boolean"},"key_type":{"enum":["var","var_combination"],"type":"string","default":"var"},"policy":{"enum":["redis","redis-cluster","local"],"type":"string","default":"local"},"rejected_code":{"maximum":599,"minimum":200,"default":503,"type":"integer"},"rejected_msg":{"minLength":1,"type":"string"}},"then":{"required":["redis_host"],"properties":{"redis_ssl_verify":{"default":false,"type":"boolean"},"redis_host":{"minLength":2,"type":"string"},"redis_port":{"minimum":1,"default":6379,"type":"integer"},"redis_username":{"minLength":1,"type":"string"},"redis_password":{"minLength":0,"type":"string"},"redis_database":{"minimum":0,"default":0,"type":"integer"},"redis_timeout":{"minimum":1,"default":1000,"type":"integer"},"redis_ssl":{"default":false,"type":"boolean"}}},"type":"object","$comment":"this is a mark for our injected plugin schema","required":["conn","burst","default_conn_delay","key"]}},"server-info":{"priority":990,"version":0.1,"scope":"global","schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}}},"wolf-rbac":{"priority":2555,"version":0.1,"type":"auth","schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"server":{"default":"http://127.0.0.1:12180","type":"string"},"appid":{"default":"unset","type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"header_prefix":{"default":"X-","type":"string"}}}},"ua-restriction":{"version":0.1,"priority":2999,"schema":{"oneOf":[{"required":["allowlist"]},{"required":["denylist"]}],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"bypass_missing":{"default":false,"type":"boolean"},"allowlist":{"items":{"minLength":1,"type":"string"},"type":"array","minItems":1},"message":{"minLength":1,"type":"string","default":"Not allowed","maxLength":1024},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"denylist":{"items":{"minLength":1,"type":"string"},"type":"array","minItems":1}}}},"azure-functions":{"priority":-1900,"version":0.1,"metadata_schema":{"properties":{"master_apikey":{"default":"","type":"string"},"master_clientid":{"default":"","type":"string"}},"type":"object"},"schema":{"required":["function_uri"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"keepalive":{"default":true,"type":"boolean"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"timeout":{"minimum":100,"default":3000,"type":"integer"},"authorization":{"properties":{"apikey":{"type":"string"},"clientid":{"type":"string"}},"type":"object"},"ssl_verify":{"default":true,"type":"boolean"},"keepalive_pool":{"minimum":1,"default":5,"type":"integer"},"keepalive_timeout":{"minimum":1000,"default":60000,"type":"integer"},"function_uri":{"type":"string"}}}},"datadog":{"priority":495,"version":0.1,"metadata_schema":{"properties":{"namespace":{"default":"apisix","type":"string"},"constant_tags":{"items":{"type":"string"},"type":"array","default":["source:apisix"]},"host":{"default":"127.0.0.1","type":"string"},"port":{"minimum":0,"default":8125,"type":"integer"}},"type":"object"},"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"prefer_name":{"default":true,"type":"boolean"},"buffer_duration":{"minimum":1,"type":"integer","default":60},"retry_delay":{"minimum":0,"type":"integer","default":1},"name":{"type":"string","default":"datadog"}}}},"proxy-mirror":{"version":0.1,"priority":1010,"schema":{"required":["host"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"host":{"pattern":"^(http(s)?|grpc(s)?):\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?$","type":"string"},"sample_ratio":{"maximum":1,"minimum":1e-05,"default":1,"type":"number"},"path":{"pattern":"^/[^?&]+$","type":"string"},"path_concat_mode":{"enum":["replace","prefix"],"default":"replace","type":"string","description":"the concatenation mode for custom path"}}}},"csrf":{"version":0.1,"priority":2980,"schema":{"encrypt_fields":["key"],"properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"name":{"type":"string","default":"apisix-csrf-token","description":"the csrf token name"},"key":{"type":"string","description":"use to generate csrf token"},"expires":{"type":"integer","default":7200,"description":"expires time(s) for csrf token"}},"required":["key"],"$comment":"this is a mark for our injected plugin schema","type":"object"}},"limit-req":{"version":0.1,"priority":1001,"schema":{"if":{"properties":{"policy":{"enum":["redis"]}}},"else":{"if":{"properties":{"policy":{"enum":["redis-cluster"]}}},"then":{"required":["redis_cluster_nodes","redis_cluster_name"],"properties":{"redis_cluster_nodes":{"items":{"minLength":2,"type":"string","maxLength":100},"type":"array","minItems":1},"redis_cluster_name":{"type":"string"},"redis_cluster_ssl":{"default":false,"type":"boolean"},"redis_password":{"minLength":0,"type":"string"},"redis_timeout":{"minimum":1,"default":1000,"type":"integer"},"redis_cluster_ssl_verify":{"default":false,"type":"boolean"}}}},"properties":{"burst":{"minimum":0,"type":"number"},"key":{"type":"string"},"rate":{"exclusiveMinimum":0,"type":"number"},"nodelay":{"default":false,"type":"boolean"},"allow_degradation":{"default":false,"type":"boolean"},"key_type":{"enum":["var","var_combination"],"type":"string","default":"var"},"policy":{"enum":["redis","redis-cluster","local"],"type":"string","default":"local"},"rejected_code":{"maximum":599,"minimum":200,"default":503,"type":"integer"},"rejected_msg":{"minLength":1,"type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"then":{"required":["redis_host"],"properties":{"redis_ssl_verify":{"default":false,"type":"boolean"},"redis_host":{"minLength":2,"type":"string"},"redis_port":{"minimum":1,"default":6379,"type":"integer"},"redis_username":{"minLength":1,"type":"string"},"redis_password":{"minLength":0,"type":"string"},"redis_database":{"minimum":0,"default":0,"type":"integer"},"redis_timeout":{"minimum":1,"default":1000,"type":"integer"},"redis_ssl":{"default":false,"type":"boolean"}}},"type":"object","$comment":"this is a mark for our injected plugin schema","required":["rate","burst","key"]}},"api-breaker":{"version":0.1,"priority":1005,"schema":{"required":["break_response_code"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"break_response_headers":{"items":{"type":"object","required":["key","value"],"properties":{"key":{"minLength":1,"type":"string"},"value":{"minLength":1,"type":"string"}}},"type":"array"},"max_breaker_sec":{"minimum":3,"default":300,"type":"integer"},"unhealthy":{"type":"object","default":{"failures":3,"http_statuses":[500]},"properties":{"failures":{"minimum":1,"default":3,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":500,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[500]}}},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"healthy":{"type":"object","default":{"successes":3,"http_statuses":[200]},"properties":{"successes":{"minimum":1,"default":3,"type":"integer"},"http_statuses":{"items":{"maximum":499,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[200]}}},"break_response_code":{"maximum":599,"minimum":200,"type":"integer"},"break_response_body":{"type":"string"}}}},"http-dubbo":{"version":0.1,"priority":504,"schema":{"required":["service_name","method"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"service_name":{"minLength":1,"type":"string"},"service_version":{"pattern":"^\\d+\\.\\d+\\.\\d+","default":"0.0.0","type":"string"},"method":{"minLength":1,"type":"string"},"connect_timeout":{"default":6000,"type":"number"},"serialization_header_key":{"type":"string"},"serialized":{"default":false,"type":"boolean"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"send_timeout":{"default":6000,"type":"number"},"params_type_desc":{"default":"","type":"string"},"read_timeout":{"default":6000,"type":"number"}}}},"degraphql":{"version":0.1,"priority":509,"schema":{"required":["query"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"operation_name":{"minLength":1,"type":"string","maxLength":1024},"variables":{"items":{"type":"string"},"type":"array","minItems":1},"query":{"minLength":1,"type":"string","maxLength":1024}}}},"chaitin-waf":{"metadata_schema":{"type":"object","required":["nodes"],"properties":{"nodes":{"items":{"type":"object","required":["host"],"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:/]+$","type":"string"},"port":{"minimum":1,"default":80,"type":"integer"}}},"type":"array","minItems":1},"config":{"type":"object","default":{},"properties":{"connect_timeout":{"default":1000,"type":"integer"},"read_timeout":{"default":1000,"type":"integer"},"req_body_size":{"default":1024,"type":"integer"},"send_timeout":{"default":1000,"type":"integer"},"keepalive_timeout":{"default":60000,"type":"integer"},"keepalive_size":{"default":256,"type":"integer"}}}}},"version":0.1,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"config":{"properties":{"connect_timeout":{"type":"integer"},"read_timeout":{"type":"integer"},"req_body_size":{"type":"integer"},"send_timeout":{"type":"integer"},"keepalive_timeout":{"type":"integer"},"keepalive_size":{"type":"integer"}},"type":"object"},"append_waf_resp_header":{"default":true,"type":"boolean"},"append_waf_debug_header":{"default":false,"type":"boolean"},"match":{"items":{"properties":{"vars":{"type":"array"}},"type":"object"},"type":"array"}}},"priority":2700},"ext-plugin-post-resp":{"version":0.1,"priority":-4000,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"conf":{"items":{"type":"object","required":["name","value"],"properties":{"value":{"type":"string"},"name":{"minLength":1,"maxLength":128,"type":"string"}}},"type":"array","minItems":1},"allow_degradation":{"default":false,"type":"boolean"}}}},"response-rewrite":{"version":0.1,"priority":899,"schema":{"$comment":"this is a mark for our injected plugin schema","type":"object","dependencies":{"filters":{"not":{"required":["body"]}},"body":{"not":{"required":["filters"]}}},"properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"filters":{"items":{"properties":{"regex":{"minLength":1,"type":"string","description":"match pattern on response body"},"options":{"type":"string","default":"jo","description":"regex options"},"scope":{"enum":["once","global"],"type":"string","default":"once","description":"regex substitution range"},"replace":{"type":"string","description":"regex substitution content"}},"type":"object","required":["regex","replace"],"description":"filter that modifies response body"},"type":"array","minItems":1,"description":"a group of filters that modify response bodyby replacing one specified string by another"},"status_code":{"maximum":598,"type":"integer","minimum":200,"description":"new status code for response"},"body_base64":{"type":"boolean","default":false,"description":"whether new body for response need base64 decode before return"},"vars":{"type":"array"},"headers":{"anyOf":[{"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"minProperties":1,"type":"object"},{"properties":{"add":{"items":{"pattern":"^[^:]+:[^:]*[^/]$","type":"string"},"type":"array","minItems":1},"set":{"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}},"minProperties":1,"type":"object"},"remove":{"items":{"pattern":"^[^:]+$","type":"string"},"type":"array","minItems":1}}}],"description":"new headers for response"},"body":{"type":"string","description":"new body for response"}}}},"redirect":{"version":0.1,"priority":900,"schema":{"oneOf":[{"required":["uri"]},{"required":["regex_uri"]},{"required":["http_to_https"]}],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"ret_code":{"minimum":200,"default":302,"type":"integer"},"regex_uri":{"items":{"type":"string","description":"regex uri"},"minItems":2,"description":"params for generating new uri that substitute from client uri, first param is regular expression, the second one is uri template","type":"array","maxItems":2},"uri":{"minLength":2,"type":"string","pattern":"(\\\\\\$[0-9a-zA-Z_]+)|\\$\\{([0-9a-zA-Z_]+)\\}|\\$([0-9a-zA-Z_]+)|(\\$|[^$\\\\]+)"},"encode_uri":{"default":false,"type":"boolean"},"append_query_string":{"default":false,"type":"boolean"},"http_to_https":{"type":"boolean"}}}},"authz-casbin":{"priority":2560,"version":0.1,"metadata_schema":{"type":"object","required":["model","policy"],"properties":{"model":{"type":"string"},"policy":{"type":"string"}}},"schema":{"oneOf":[{"required":["model_path","policy_path","username"]},{"required":["model","policy","username"]}],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"model_path":{"type":"string"},"policy_path":{"type":"string"},"model":{"type":"string"},"policy":{"type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"username":{"type":"string"}}}},"tcp-logger":{"schema":{"required":["host","port"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"tls_options":{"type":"string"},"include_req_body":{"default":false,"type":"boolean"},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"name":{"type":"string","default":"tcp logger"},"host":{"type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"timeout":{"minimum":1,"default":1000,"type":"integer"},"include_resp_body":{"default":false,"type":"boolean"},"inactive_timeout":{"minimum":1,"type":"integer","default":5},"log_format":{"type":"object"},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"batch_max_size":{"minimum":1,"type":"integer","default":1000},"max_retry_count":{"minimum":0,"type":"integer","default":0},"retry_delay":{"minimum":0,"type":"integer","default":1},"buffer_duration":{"minimum":1,"type":"integer","default":60},"port":{"minimum":0,"type":"integer"},"tls":{"default":false,"type":"boolean"}}},"version":0.1,"priority":405,"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"}},"traffic-split":{"version":0.1,"priority":966,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"rules":{"items":{"properties":{"match":{"items":{"properties":{"vars":{"type":"array"}},"type":"object"},"type":"array"},"weighted_upstreams":{"items":{"properties":{"upstream_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"weight":{"minimum":0,"type":"integer","default":1,"description":"used to split traffic between differentupstreams for plugin configuration"},"upstream":{"additionalProperties":false,"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"type":"object","properties":{"discovery_args":{"properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}},"type":"object"},"keepalive_pool":{"properties":{"size":{"default":320,"minimum":1,"type":"integer"},"idle_timeout":{"default":60,"minimum":0,"type":"number"},"requests":{"default":1000,"minimum":1,"type":"integer"}},"type":"object"},"nodes":{"anyOf":[{"patternProperties":{".*":{"type":"integer","minimum":0,"description":"weight of node"}},"type":"object"},{"items":{"type":"object","required":["host","weight"],"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"priority":{"type":"integer","default":0,"description":"priority of node"},"metadata":{"type":"object","description":"metadata of node"},"port":{"type":"integer","minimum":1,"description":"port of node"},"weight":{"type":"integer","minimum":0,"description":"weight of node"}}},"type":"array"}]},"desc":{"maxLength":256,"type":"string"},"create_time":{"type":"integer"},"retries":{"minimum":0,"type":"integer"},"retry_timeout":{"minimum":0,"type":"number"},"scheme":{"enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"default":"http","description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka."},"id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"service_name":{"minLength":1,"maxLength":256,"type":"string"},"name":{"minLength":1,"maxLength":100,"type":"string"},"type":{"type":"string","default":"roundrobin","description":"algorithms of load balancing"},"hash_on":{"enum":["vars","header","cookie","consumer","vars_combinations"],"default":"vars","type":"string"},"tls":{"type":"object","dependencies":{"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_cert":{"required":["client_key"]},"client_key":{"required":["client_cert"]}},"properties":{"client_cert_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"verify":{"type":"boolean","default":false,"description":"Turn on server certificate verification, currently only kafka upstream is supported"},"client_cert":{"minLength":128,"type":"string","maxLength":65536},"client_key":{"minLength":128,"type":"string","maxLength":65536}}},"upstream_host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"checks":{"additionalProperties":false,"type":"object","anyOf":[{"required":["active"]},{"required":["active","passive"]}],"properties":{"passive":{"properties":{"type":{"enum":["http","https","tcp"],"type":"string","default":"http"},"healthy":{"properties":{"successes":{"maximum":254,"minimum":0,"default":5,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]}},"type":"object"},"unhealthy":{"properties":{"tcp_failures":{"maximum":254,"minimum":0,"default":2,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[429,500,503]},"timeouts":{"maximum":254,"minimum":0,"default":7,"type":"integer"},"http_failures":{"maximum":254,"minimum":0,"default":5,"type":"integer"}},"type":"object"}},"type":"object"},"active":{"properties":{"host":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"unhealthy":{"properties":{"tcp_failures":{"maximum":254,"minimum":1,"default":2,"type":"integer"},"timeouts":{"maximum":254,"minimum":1,"default":3,"type":"integer"},"interval":{"minimum":1,"default":1,"type":"integer"},"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[429,404,500,501,502,503,504,505]},"http_failures":{"maximum":254,"minimum":1,"default":5,"type":"integer"}},"type":"object"},"type":{"enum":["http","https","tcp"],"type":"string","default":"http"},"req_headers":{"items":{"uniqueItems":true,"type":"string"},"type":"array","minItems":1},"timeout":{"default":1,"type":"number"},"concurrency":{"default":10,"type":"integer"},"http_path":{"default":"/","type":"string"},"https_verify_certificate":{"default":true,"type":"boolean"},"healthy":{"properties":{"http_statuses":{"items":{"maximum":599,"minimum":200,"type":"integer"},"minItems":1,"type":"array","uniqueItems":true,"default":[200,302]},"interval":{"minimum":1,"default":1,"type":"integer"},"successes":{"maximum":254,"minimum":1,"default":2,"type":"integer"}},"type":"object"},"port":{"maximum":65535,"minimum":1,"type":"integer"}},"type":"object"}}},"timeout":{"type":"object","required":["connect","send","read"],"properties":{"send":{"exclusiveMinimum":0,"type":"number"},"read":{"exclusiveMinimum":0,"type":"number"},"connect":{"exclusiveMinimum":0,"type":"number"}}},"labels":{"patternProperties":{".*":{"minLength":1,"maxLength":256,"description":"value of label","type":"string","pattern":"^\\S+$"}},"type":"object","description":"key/value pairs to specify attributes"},"pass_host":{"enum":["pass","node","rewrite"],"type":"string","default":"pass","description":"mod of host passing"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"update_time":{"type":"integer"},"discovery_type":{"type":"string","description":"discovery type"}}}},"type":"object"},"minItems":1,"type":"array","default":[{"weight":1}],"maxItems":20}},"type":"object"},"type":"array"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}}},"real-ip":{"version":0.1,"priority":23000,"schema":{"required":["source"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"source":{"minLength":1,"type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"trusted_addresses":{"items":{"anyOf":[{"title":"IPv4","type":"string","format":"ipv4"},{"title":"IPv4/CIDR","type":"string","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"title":"IPv6","type":"string","format":"ipv6"},{"title":"IPv6/CIDR","type":"string","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"type":"array","minItems":1},"recursive":{"default":false,"type":"boolean"}}}},"uri-blocker":{"version":0.1,"priority":2900,"schema":{"required":["block_rules"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"block_rules":{"items":{"minLength":1,"type":"string","maxLength":4096},"type":"array","uniqueItems":true},"case_insensitive":{"default":false,"type":"boolean"},"rejected_code":{"minimum":200,"default":403,"type":"integer"},"rejected_msg":{"minLength":1,"type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}}},"client-control":{"version":0.1,"priority":22000,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"max_body_size":{"minimum":0,"type":"integer","description":"Maximum message body size in bytes. No restriction when set to 0."}}}},"limit-count":{"version":0.5,"priority":1002,"schema":{"if":{"properties":{"policy":{"enum":["redis"]}}},"else":{"if":{"properties":{"policy":{"enum":["redis-cluster"]}}},"then":{"required":["redis_cluster_nodes","redis_cluster_name"],"properties":{"redis_cluster_nodes":{"items":{"minLength":2,"type":"string","maxLength":100},"type":"array","minItems":1},"redis_cluster_name":{"type":"string"},"redis_cluster_ssl":{"default":false,"type":"boolean"},"redis_password":{"minLength":0,"type":"string"},"redis_timeout":{"minimum":1,"default":1000,"type":"integer"},"redis_cluster_ssl_verify":{"default":false,"type":"boolean"}}}},"properties":{"show_limit_quota_header":{"default":true,"type":"boolean"},"time_window":{"exclusiveMinimum":0,"type":"integer"},"key":{"default":"remote_addr","type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"key_type":{"enum":["var","var_combination","constant"],"type":"string","default":"var"},"allow_degradation":{"default":false,"type":"boolean"},"count":{"exclusiveMinimum":0,"type":"integer"},"policy":{"enum":["local","redis","redis-cluster"],"type":"string","default":"local"},"rejected_code":{"maximum":599,"minimum":200,"default":503,"type":"integer"},"rejected_msg":{"minLength":1,"type":"string"},"group":{"type":"string"}},"then":{"required":["redis_host"],"properties":{"redis_ssl_verify":{"default":false,"type":"boolean"},"redis_host":{"minLength":2,"type":"string"},"redis_port":{"minimum":1,"default":6379,"type":"integer"},"redis_username":{"minLength":1,"type":"string"},"redis_password":{"minLength":0,"type":"string"},"redis_database":{"minimum":0,"default":0,"type":"integer"},"redis_timeout":{"minimum":1,"default":1000,"type":"integer"},"redis_ssl":{"default":false,"type":"boolean"}}},"type":"object","$comment":"this is a mark for our injected plugin schema","required":["count","time_window"]}},"public-api":{"version":0.1,"priority":501,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"uri":{"type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}}}},"file-logger":{"priority":399,"version":0.1,"schema":{"required":["path"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"log_format":{"type":"object"},"include_req_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"include_resp_body_expr":{"items":{"type":"array"},"type":"array","minItems":1},"include_resp_body":{"default":false,"type":"boolean"},"path":{"type":"string"},"match":{"items":{"type":"array"},"type":"array","maxItems":20},"include_req_body":{"default":false,"type":"boolean"}}},"metadata_schema":{"properties":{"log_format":{"type":"object"}},"type":"object"}},"request-validation":{"type":"validation","version":0.1,"schema":{"anyOf":[{"required":["header_schema"]},{"required":["body_schema"]}],"properties":{"body_schema":{"type":"object"},"header_schema":{"type":"object"},"rejected_code":{"maximum":599,"minimum":200,"default":400,"type":"integer"},"rejected_msg":{"minLength":1,"type":"string","maxLength":256},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"}},"type":"object","$comment":"this is a mark for our injected plugin schema"},"priority":2800},"cas-auth":{"version":0.1,"priority":2597,"schema":{"required":["idp_uri","cas_callback_uri","logout_uri"],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"cas_callback_uri":{"type":"string"},"logout_uri":{"type":"string"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"idp_uri":{"type":"string"}}}},"grpc-transcode":{"version":0.1,"schema":{"additionalProperties":true,"properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"pb_option":{"items":{"anyOf":[{"enum":["int64_as_number","int64_as_string","int64_as_hexstring"],"type":"string","description":"enum as result"},{"enum":["enum_as_name","enum_as_value"],"type":"string","description":"int64 as result"},{"enum":["auto_default_values","no_default_values","use_default_values","use_default_metatable"],"type":"string","description":"default values option"},{"enum":["enable_hooks","disable_hooks"],"type":"string","description":"hooks option"}],"type":"string"},"type":"array","minItems":1,"default":["enum_as_name","int64_as_number","auto_default_values","disable_hooks"]},"show_status_in_body":{"type":"boolean","default":false,"description":"show decoded grpc-status-details-bin in response body"},"service":{"type":"string","description":"the grpc service name"},"proto_id":{"anyOf":[{"minLength":1,"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","maxLength":64},{"minimum":1,"type":"integer"}]},"status_detail_type":{"type":"string","description":"the message type of the grpc-status-details-bin's details part, if not given, the details part will not be decoded"},"method":{"type":"string","description":"the method name in the grpc service."},"deadline":{"type":"number","default":0,"description":"deadline for grpc, millisecond"}},"required":["proto_id","service","method"],"$comment":"this is a mark for our injected plugin schema","type":"object"},"priority":506},"cors":{"metadata_schema":{"properties":{"allow_origins":{"additionalProperties":{"pattern":"^(\\*|\\*\\*|null|\\w+://[^,]+(,\\w+://[^,]+)*)$","type":"string"},"type":"object"}},"type":"object"},"version":0.1,"priority":4000,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"expose_headers":{"type":"string","default":"*","description":"you can use '*' to expose all header when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple header use ',' to split. default: *."},"timing_allow_origins_by_regex":{"items":{"minLength":1,"type":"string","maxLength":4096},"minItems":1,"description":"you can use regex to allow specific origins which can view timing information,for example use [.*\\.test.com] to allow a.test.com and b.test.com","type":"array","uniqueItems":true},"allow_credential":{"type":"boolean","default":false,"description":"allow client append credential. according to CORS specification,if you set this option to 'true', you can not use '*' for other options."},"allow_origins":{"default":"*","type":"string","pattern":"^(\\*|\\*\\*|null|\\w+://[^,]+(,\\w+://[^,]+)*)$","description":"you can use '*' to allow all origins when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple origin use ',' to split. default: *."},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"allow_origins_by_regex":{"items":{"minLength":1,"type":"string","maxLength":4096},"minItems":1,"description":"you can use regex to allow specific origins when no credentials,for example use [.*\\.test.com$] to allow a.test.com and b.test.com","type":"array","uniqueItems":true},"allow_methods":{"type":"string","default":"*","description":"you can use '*' to allow all methods when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple method use ',' to split. default: *."},"allow_origins_by_metadata":{"items":{"minLength":1,"type":"string","maxLength":4096},"minItems":1,"description":"set allowed origins by referencing origins in plugin metadata","type":"array","uniqueItems":true},"timing_allow_origins":{"type":"string","pattern":"^(\\*|\\*\\*|null|\\w+://[^,]+(,\\w+://[^,]+)*)$","description":"you can use '*' to allow all origins which can view timing information when no credentials,'**' to allow forcefully (it will bring some security risks, be careful),multiple origin use ',' to split. default: nil"},"allow_headers":{"type":"string","default":"*","description":"you can use '*' to allow all header when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple header use ',' to split. default: *."},"max_age":{"type":"integer","default":5,"description":"maximum number of seconds the results can be cached.-1 means no cached, the max value is depend on browser,more details plz check MDN. default: 5."}}}},"body-transformer":{"version":0.1,"priority":1080,"schema":{"$comment":"this is a mark for our injected plugin schema","type":"object","anyOf":[{"required":["request"]},{"required":["response"]},{"required":["request","response"]}],"properties":{"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"request":{"type":"object","required":["template"],"properties":{"input_format":{"enum":["xml","json","encoded","args","plain"],"type":"string"},"template_is_base64":{"type":"boolean"},"template":{"type":"string"}}},"response":{"type":"object","required":["template"],"properties":{"input_format":{"enum":["xml","json","encoded","args","plain"],"type":"string"},"template_is_base64":{"type":"boolean"},"template":{"type":"string"}}}}}},"gzip":{"version":0.1,"priority":995,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"comp_level":{"maximum":9,"minimum":1,"default":1,"type":"integer"},"vary":{"type":"boolean"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"types":{"anyOf":[{"items":{"minLength":1,"type":"string"},"type":"array","minItems":1},{"enum":["*"]}],"default":["text/html"]},"http_version":{"enum":[1.1,1],"default":1.1},"buffers":{"type":"object","default":{"number":32,"size":4096},"properties":{"number":{"minimum":1,"default":32,"type":"integer"},"size":{"minimum":1,"default":4096,"type":"integer"}}},"min_length":{"minimum":1,"default":20,"type":"integer"}}}},"request-id":{"version":0.1,"priority":12015,"schema":{"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"range_id":{"type":"object","default":{},"properties":{"length":{"minimum":6,"default":16,"type":"integer"},"char_set":{"minLength":6,"type":"string","default":"abcdefghijklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ0123456789"}}},"header_name":{"default":"X-Request-Id","type":"string"},"algorithm":{"enum":["uuid","nanoid","range_id"],"type":"string","default":"uuid"},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"include_in_response":{"default":true,"type":"boolean"}}}},"referer-restriction":{"version":0.1,"priority":2990,"schema":{"oneOf":[{"required":["whitelist"]},{"required":["blacklist"]}],"type":"object","$comment":"this is a mark for our injected plugin schema","properties":{"bypass_missing":{"default":false,"type":"boolean"},"message":{"minLength":1,"type":"string","default":"Your referer host is not allowed","maxLength":1024},"whitelist":{"items":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"type":"array","minItems":1},"_meta":{"properties":{"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]},"disable":{"type":"boolean"},"priority":{"type":"integer","description":"priority of plugins by customized order"}},"type":"object"},"blacklist":{"items":{"pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$","type":"string"},"type":"array","minItems":1}}}}}}
